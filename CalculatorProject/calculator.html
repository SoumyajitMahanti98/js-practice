<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beautiful Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="calculator">
        <div class="display">
            <input type="text" id="display" disabled>
        </div>
        <div class="buttons">
            <button class="btn clear" id="clear">C</button>
            <button class="btn operator" id="divide">/</button>
            <button class="btn operator" id="multiply">*</button>
            <button class="btn operator" id="modulo">%</button>
            
            <button class="btn number" id="seven">7</button>
            <button class="btn number" id="eight">8</button>
            <button class="btn number" id="nine">9</button>
            <button class="btn operator" id="subtract">-</button>
            
            <button class="btn number" id="four">4</button>
            <button class="btn number" id="five">5</button>
            <button class="btn number" id="six">6</button>
            <button class="btn operator" id="add">+</button>
            
            <button class="btn number" id="one">1</button>
            <button class="btn number" id="two">2</button>
            <button class="btn number" id="three">3</button>
            <button class="btn decimal" id="decimal">.</button>
            
            <button class="btn zero" id="zero">0</button>
            <button class="btn equal" id="equal">=</button>
        </div>
    </div>

    <script>
        // Calculator state variables
        let currentInput = '';
        let previousInput = '';
        let operator = '';
        let shouldResetDisplay = false;

        // Get display element
        const display = document.getElementById('display');

        // Mathematical operation functions
        function add(num1, num2) {
            return num1 + num2;
        }

        function subtract(num1, num2) {
            return num1 - num2;
        }

        function multiply(num1, num2) {
            return num1 * num2;
        }

        function divide(num1, num2) {
            if (num2 === 0) {
                return "Error";
            }
            return num1 / num2;
        }

        function modDivision(num1, num2) {
            if (num2 === 0) {
                return "Error";
            }
            return num1 % num2;
        }

        // Update display
        function updateDisplay(value) {
            display.value = value;
        }

        // Clear calculator
        function clearCalculator() {
            currentInput = '';
            previousInput = '';
            operator = '';
            shouldResetDisplay = false;
            updateDisplay('');
        }

        // Handle number input
        function inputNumber(number) {
            if (shouldResetDisplay) {
                currentInput = '';
                shouldResetDisplay = false;
            }
            
            currentInput += number;
            updateDisplay(currentInput);
        }

        // Handle decimal input
        function inputDecimal() {
            if (shouldResetDisplay) {
                currentInput = '';
                shouldResetDisplay = false;
            }
            
            if (currentInput === '') {
                currentInput = '0';
            }
            
            if (currentInput.indexOf('.') === -1) {
                currentInput += '.';
                updateDisplay(currentInput);
            }
        }

        // Handle operator input
        function inputOperator(nextOperator) {
            const inputValue = parseFloat(currentInput);

            if (previousInput === '') {
                previousInput = inputValue;
            } else if (operator) {
                const currentValue = previousInput || 0;
                const newValue = calculate(currentValue, inputValue, operator);

                updateDisplay(String(newValue));
                previousInput = newValue;
            }

            shouldResetDisplay = true;
            operator = nextOperator;
        }

        // Perform calculation
        function calculate(firstNumber, secondNumber, operator) {
            switch (operator) {
                case '+':
                    return add(firstNumber, secondNumber);
                case '-':
                    return subtract(firstNumber, secondNumber);
                case '*':
                    return multiply(firstNumber, secondNumber);
                case '/':
                    return divide(firstNumber, secondNumber);
                case '%':
                    return modDivision(firstNumber, secondNumber);
                default:
                    return secondNumber;
            }
        }

        // Handle equals
        function performCalculation() {
            const inputValue = parseFloat(currentInput);

            if (previousInput !== '' && operator && !shouldResetDisplay) {
                const newValue = calculate(previousInput, inputValue, operator);
                
                updateDisplay(String(newValue));
                previousInput = '';
                operator = '';
                currentInput = String(newValue);
                shouldResetDisplay = true;
            }
        }

        // Event listeners - Wait for DOM to load
        document.addEventListener('DOMContentLoaded', function() {
            // Number buttons
            document.getElementById('zero').addEventListener('click', () => inputNumber('0'));
            document.getElementById('one').addEventListener('click', () => inputNumber('1'));
            document.getElementById('two').addEventListener('click', () => inputNumber('2'));
            document.getElementById('three').addEventListener('click', () => inputNumber('3'));
            document.getElementById('four').addEventListener('click', () => inputNumber('4'));
            document.getElementById('five').addEventListener('click', () => inputNumber('5'));
            document.getElementById('six').addEventListener('click', () => inputNumber('6'));
            document.getElementById('seven').addEventListener('click', () => inputNumber('7'));
            document.getElementById('eight').addEventListener('click', () => inputNumber('8'));
            document.getElementById('nine').addEventListener('click', () => inputNumber('9'));

            // Decimal button
            document.getElementById('decimal').addEventListener('click', inputDecimal);

            // Operator buttons
            document.getElementById('add').addEventListener('click', () => inputOperator('+'));
            document.getElementById('subtract').addEventListener('click', () => inputOperator('-'));
            document.getElementById('multiply').addEventListener('click', () => inputOperator('*'));
            document.getElementById('divide').addEventListener('click', () => inputOperator('/'));
            document.getElementById('modulo').addEventListener('click', () => inputOperator('%'));

            // Special buttons
            document.getElementById('clear').addEventListener('click', clearCalculator);
            document.getElementById('equal').addEventListener('click', performCalculation);
        });
    </script>
</body>
</html>